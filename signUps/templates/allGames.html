{% extends "base.html" %}
{% load static %}

{% block javascript %}
    <script>
        $("#attend").click(function() {
            var id;
            id = $(this).attr("data-id");
            $.ajax({
                url: '{% url "signUps:attendGame" %}',
                data: {
                    'id': id
                },
                dataType: 'json',
            })
        })
        $("#leave").click(function() {
            var id;
            id = $(this).attr("data-id");
            $.ajax({
                url: '{% url "signUps:leaveGame" %}',
                data: {
                    'id': id
                },
                dataType: 'json',
            })
        })
    </script>
{% endblock %}

{% block body_block %}
  <div class="container">
    <div class="jumbotron">
        <h2>Here are all of the current games:</h2>
        {% if games_list %}
            <ul>
                {% for game in games_list %}
                    <div class="container">
                        <tr>
                        <p class="mb2">{{ game.name }} </p>
                        <p class="mb2">Sport: {{ game.sport }} </p>
                        <p class="mb2">{{ game.level }} </p>
                        <p class="mb2">Players Coming: {{ game.current_players }} / {{ game.max_players }} </p>
                        {% if game.temp %}
                            <a href="" class="btn btn-danger" id="leave" role="button" data-id="{{ game.id }}">Leave Game</a>
                        {% else %}
                            <a href="" class="btn btn-success" id="attend" role="button" data-id="{{ game.id }}">Attend Game</a>
                        {% endif %}
                        <a href="/signUps/games/{{ game.id }}" class="btn btn-warning" role="button">See Game Details</a>
                        </tr>
                    </div>
                {% endfor %}
            </ul>
        {% else %}
            <h2>There are currently no games available </h2>
        {% endif %}

    </div>
  </div>
{% endblock %}